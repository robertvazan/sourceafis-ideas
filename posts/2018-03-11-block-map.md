# Block map #

Part of [SourceAFIS idea blog](../README.md).

Blocks are small regions of the image that can be processed independently.
Blocks can split the image into non-overlapping regions or they can overlap somewhat
to incorporate surrounding image area into computed properties of the block.

Blocks are typically aligned to pixel boundaries for easier processing.
Block size can be tuned to fit the use case, typically from 8 to 40 pixels
horizontally and vertically on 500dpi fingerprint images.
Block size may be different vertically and horizontally and different for every block.

Block map describes positions and sizes of blocks on the image in easily searchable format.
If blocks are laid out in regular grid, block map only needs to store X and Y coordinates once for whole columns and rows of blocks.
This reduces size of block map in memory to O(W+H) where W is number of block columns and H is number of block rows,
but it still allows O(1) lookup of coordinates of any block on the block map.
Block coordinates include block size, corner positions, and center position (possibly pixel-aligned).

One way to choose blocks of approximately the same size is
to divide image width and height by minimum block size to compute the number of blocks horizontally and vertically,
and then divide the image evenly into that many columns and rows of blocks.

Block map may include several grids of blocks that are independent of each other.
One example of such useful secondary grid is a block grid shifted by half of block size.
Such secondary grid has blocks centered on corners of blocks in the primary grid.

Blocks near image borders can be clipped to fit within the image
or they can be allowed to extend beyond image borders
or the image can be padded to accommodate blocks near borders.

Published by Robert Va≈æan on March 11, 2018

